<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>5æ–‡å­—çˆ†å¼¾ã‚¯ã‚¤ã‚º</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --box: min(14vw, 60px);
  --font: min(8vw, 36px);
}

body {
  margin: 0;
  background: radial-gradient(#333, #000);
  color: #fff;
  font-family: system-ui, sans-serif;
  text-align: center;
}

/* ---------- å…±é€š ---------- */
button {
  font-size: 20px;
  padding: 12px 30px;
  border-radius: 8px;
  border: none;
}

.hidden { display: none; }

/* ---------- ã‚¿ã‚¤ãƒˆãƒ« ---------- */
#title {
  padding-top: 20vh;
}

#title h1 {
  font-size: min(10vw, 40px);
  color: red;
}

/* ---------- ã‚²ãƒ¼ãƒ  ---------- */
#theme {
  font-size: min(6vw, 24px);
  margin: 10px;
}

#bomb {
  font-size: min(10vw, 40px);
}

.boxes {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 15px 0;
}

.box {
  width: var(--box);
  height: var(--box);
  border: 3px solid white;
  font-size: var(--font);
  line-height: var(--box);
  background: black;
}

input {
  width: min(80vw, 300px);
  font-size: 22px;
  padding: 8px;
  text-align: center;
}

.player-list {
  margin-top: 15px;
  font-size: 16px;
}
</style>
</head>

<body>

<!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
<div id="title">
  <h1>ğŸ’£ 5æ–‡å­—çˆ†å¼¾ã‚¯ã‚¤ã‚º ğŸ’£</h1>
  <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
<div id="game" class="hidden">
  <div id="theme"></div>
  <div id="bomb">ğŸ’£ 10</div>

  <div class="boxes">
    <div class="box"></div><div class="box"></div><div class="box"></div>
    <div class="box"></div><div class="box"></div>
  </div>

  <input id="answer" maxlength="5" placeholder="5æ–‡å­—ã§å…¥åŠ›"
    inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="off">

  <br>
  <button onclick="checkPlayer()">æ±ºå®š</button>

  <div class="player-list" id="status"></div>
</div>

<script>
/* ---------- å•é¡Œãƒ‡ãƒ¼ã‚¿ ---------- */
const quizData = {
  æœç‰©:["ã‚Šã‚“ã”ã‚ã‚","ã°ãªãªã¿","ã¶ã©ã†ãˆ","ã‚ã‚ã‚“ã±","ã‚‚ã‚‚ãŸã‚"],
  å‹•ç‰©:["ã‚ã‚‰ã„ã","ã‚‰ã„ãŠã‚“","ã—ã¾ã†ã¾","ãã‚Šã‚“ã•","ã“ã‚ã‚‰ã‚“"],
  é£Ÿã¹ç‰©:["ãŠã‚€ã‚‰ã„","ãŸã“ã‚„ã","ã‚‰ãƒ¼ã‚ã‚“","ã‹ã‚Œãƒ¼ã‚‰","ã™ã—ã‚ã†"],
  å›½å:["ã«ã»ã‚“ã“","ã‚ã‚ã‚Šã‹","ãµã‚‰ã‚“ã™","ã©ã„ã¤ã”","ã„ãã‚Šã™"],
  æ—¥æœ¬åœ°å:["ã¨ã†ãã‚‡","ãŠãŠã•ã‹","ãªã”ã‚„ã—","ãµããŠã‹","ã•ã£ã½"]
};

/* ---------- å¤‰æ•° ---------- */
let question;
let usedAnswers = [];
let cpuAnswers = [];
let timer;
let time = 10;

/* ---------- ã‚¹ã‚¿ãƒ¼ãƒˆ ---------- */
function startGame() {
  document.getElementById("title").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");

  setupQuestion();
  startTimer();
  startCPUThinking();
}

/* ---------- å•é¡Œç”Ÿæˆ ---------- */
function setupQuestion() {
  const genre = Object.keys(quizData)
    [Math.floor(Math.random()*Object.keys(quizData).length)];

  const answers = [...quizData[genre]];
  answers.sort(() => Math.random() - 0.5);

  question = answers[0];
  cpuAnswers = answers.slice(1,5); // CPU4äººã€ã‹ã¶ã‚Šãªã—
  usedAnswers = [];

  document.getElementById("theme").textContent = "ãŠé¡Œï¼š" + genre;
  document.getElementById("status").textContent =
    "CPUå¾…æ©Ÿä¸­â€¦ï¼ˆ4äººï¼‰";
}

/* ---------- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å…¥åŠ›ï¼ˆIMEå¯¾ç­–ï¼‰ ---------- */
const boxes = document.querySelectorAll(".box");
const input = document.getElementById("answer");

input.addEventListener("keyup", () => {
  boxes.forEach((b,i)=>b.textContent=input.value[i]||"");
});

/* ---------- ã‚¿ã‚¤ãƒãƒ¼ ---------- */
function startTimer() {
  time = 10;
  const bomb = document.getElementById("bomb");

  timer = setInterval(() => {
    time--;
    bomb.textContent = "ğŸ’£ " + time;
    if (time <= 0) explode("æ™‚é–“åˆ‡ã‚Œï¼");
  }, 1000);
}

/* ---------- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¤å®š ---------- */
function checkPlayer() {
  if (input.value === question) {
    clearInterval(timer);
    document.getElementById("status").textContent = "ã‚ãªãŸï¼šæ­£è§£ï¼";
  } else {
    explode("ã‚ãªãŸä¸æ­£è§£ï¼");
  }
}

/* ---------- CPUæ€è€ƒ ---------- */
function startCPUThinking() {
  cpuAnswers.forEach((ans, i) => {
    const thinkTime = 2500 + Math.random() * 3500; // äººé–“ã‚‰ã—ã„é–“
    setTimeout(() => {
      usedAnswers.push(ans);
      document.getElementById("status").textContent =
        `CPU${usedAnswers.length}äºº æ­£è§£æ¸ˆã¿`;
    }, thinkTime);
  });
}

/* ---------- çˆ†ç™º ---------- */
function explode(msg) {
  clearInterval(timer);
  document.getElementById("bomb").textContent = "ğŸ’¥ BOOM!!";
  document.getElementById("status").textContent = msg;
  input.disabled = true;
}
</script>

</body>
</html>
